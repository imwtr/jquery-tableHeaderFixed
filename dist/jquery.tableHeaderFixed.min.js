(function(a){a.fn.tableHeaderFixed=function(d){var h={fixedInPage:true,fixedInContainer:false,containerMaxHeight:400,containerClass:"table-fixed-content-wrap",fixedHeaderClass:"table-fixed-header"};var f=a.extend({},h,d),i=a(window);this.each(function(){var j=a(this);if(f.fixedInContainer){e(b(j),j)}else{if(f.fixedInPage){c(j)}}});function g(j){if(!j){return{}}var l=j.offsetLeft,k=j.offsetTop;while(j=j.offsetParent){l+=j.offsetLeft;k+=j.offsetTop}return{left:l,top:k}}function b(k){var l=k.closest("."+f.containerClass);if(!l.length){l=a('<div class="'+f.containerClass+'" />').css({overflowY:"auto",maxHeight:f.containerMaxHeight});var j=k.parent();j.append(l.append(k))}return l}function e(p,k){if(p[0].scrollHeight<=p[0].offsetHeight){p.siblings("."+f.fixedHeaderClass).hide();return}var j=p.siblings("."+f.fixedHeaderClass),o=j.length?j:k.clone(),m=k.find("thead"),n=k.find("tr").eq(1).find("td"),l=k.find("th");o.find("tbody,colgroup").remove();if(m.is(":visible")){o.find("th").each(function(q){var r=l.eq(q)[0].clientWidth;a(this).attr("width",r)});m.css({visibility:"hidden"});o.show();setTimeout(function(){k.css({marginTop:-o.height()})},0)}if(!j.length){p.before(o.attr("class","table table-center myTable "+f.fixedHeaderClass).css({display:"table",width:"auto"}))}i.resize(function(){if(n.length){o.find("th").each(function(q){var r=n.eq(q)[0].clientWidth;a(this).attr("width",r)})}})}function c(q){var n=g(q[0]).top,p=q.find("tbody")[0].offsetHeight,k=q.siblings("."+f.fixedHeaderClass),r=k.length?k:q.clone(),o=r[0].offsetHeight,l=q.find("thead"),j=q.find("tr").eq(1).find("td"),m=q.find("th");r.find("tbody,colgroup").remove();if(l.is(":visible")){r.find("th").each(function(s){var t=m.eq(s)[0].clientWidth;a(this).attr("width",t)})}if(!k.length){q.before(r.attr("class","table table-center myTable "+f.fixedHeaderClass).css({position:"fixed",top:"0",width:"auto"}))}i.resize(function(){if(j.length){r.find("th").each(function(s){var t=j.eq(s)[0].clientWidth;a(this).attr("width",t)})}});i.scroll(function(){var s=document.scrollingElement.scrollTop;if(s>=n&&s<=n+p){l.css({visibility:"hidden"});r.show()}else{l.css({visibility:"visible"});r.hide()}})}}})(jQuery);
